<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>skValist.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.0 on Mon Mar 5 16:00:30 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>skValist.h</h1><div class="fragment"><pre>00001 <font class="comment">/*
</font>00002 <font class="comment">  Copyright 1996-2000 Simon Whiteside
</font>00003 <font class="comment">
</font>00004 <font class="comment">* $Id: skValist.h-source.html,v 1.1 2001/03/05 16:22:46 sdw Exp $
</font>00005 <font class="comment">*/</font>
00006 
00007 <font class="preprocessor">#ifndef skVALIST_H
</font>00008 <font class="preprocessor"></font><font class="preprocessor">#define skVALIST_H
</font>00009 <font class="preprocessor"></font>
00010 
00011 <font class="preprocessor">#include "skGeneral.h"</font>
00012 <font class="preprocessor">#include "skBoundsException.h"</font>
00013     
<a name="l00017"></a><a class="code" href="class_skTVAList.html">00017</a> <font class="keyword">template</font> &lt;<font class="keyword">class </font>T&gt; <font class="keyword">class </font><a class="code" href="class_skTVAList.html">skTVAList</a> 
00018 {         
00019  <font class="keyword">public</font>:
00023   <a class="code" href="class_skTVAList.html#a0">skTVAList</a>();
00027   <a class="code" href="class_skTVAList.html#a0">skTVAList</a>(<font class="keyword">const</font> <a class="code" href="class_skTVAList.html">skTVAList</a>&lt;T&gt;&amp;);
00031   <a class="code" href="class_skTVAList.html#a0">skTVAList</a>(USize initial_size,USize growth_increment);
00035   <font class="keyword">virtual</font> <a class="code" href="class_skTVAList.html#a3">~skTVAList</a>();                                 
00039   <a class="code" href="class_skTVAList.html">skTVAList</a>&amp; <a class="code" href="class_skTVAList.html#a4">operator=</a>(<font class="keyword">const</font> <a class="code" href="class_skTVAList.html">skTVAList</a>&lt;T&gt;&amp;);
00043   <font class="keywordtype">void</font>  <a class="code" href="class_skTVAList.html#a5">clear</a>();                                        
00047   USize <a class="code" href="class_skTVAList.html#a6">entries</a>() <font class="keyword">const</font>;
00052   <font class="keywordtype">void</font>  <a class="code" href="class_skTVAList.html#a7">deleteElt</a>(USize  n);
00056   <font class="keywordtype">void</font>  <a class="code" href="class_skTVAList.html#a8">prepend</a>(<font class="keyword">const</font> T &amp;t);
00061   <font class="keywordtype">void</font>  <a class="code" href="class_skTVAList.html#a9">insert</a>(<font class="keyword">const</font> T &amp;t,USize index);
00065   <font class="keywordtype">void</font>  <a class="code" href="class_skTVAList.html#a10">append</a>(<font class="keyword">const</font> T &amp;t);
00069   <font class="keywordtype">void</font>  <a class="code" href="class_skTVAList.html#a11">remove</a>(<font class="keyword">const</font> T &amp;t);     
00075   T&amp; <a class="code" href="class_skTVAList.html#a12">operator[]</a>(USize  n) <font class="keyword">const</font>;
00080   <font class="keywordtype">int</font> <a class="code" href="class_skTVAList.html#a13">index</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>;
00085   <font class="keywordtype">bool</font>  <a class="code" href="class_skTVAList.html#a14">contains</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>;
00089   <font class="keywordtype">void</font>  <a class="code" href="class_skTVAList.html#a15">growTo</a>(USize new_size);
00090  <font class="keyword">protected</font>:
00094   <font class="keywordtype">int</font>   <a class="code" href="class_skTVAList.html#b0">findElt</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>;
00098   <font class="keywordtype">void</font>  <a class="code" href="class_skTVAList.html#b1">grow</a>();
<a name="l00102"></a><a class="code" href="class_skTVAList.html#n0">00102</a>   T*  m_Array;  
<a name="l00106"></a><a class="code" href="class_skTVAList.html#n1">00106</a>   USize m_ArraySize;
<a name="l00110"></a><a class="code" href="class_skTVAList.html#n2">00110</a>   USize m_Entries;
<a name="l00114"></a><a class="code" href="class_skTVAList.html#n3">00114</a>   USize m_GrowthIncrement;
00115 };        
00116 <font class="keyword">const</font> <font class="keywordtype">int</font> TVALIST_DEFAULT_SIZE = 0;                                     <font class="comment">// so array not allocated until needed</font>
00117 <font class="keyword">const</font> <font class="keywordtype">int</font> TVALIST_DEFAULT_GROWTH_INCREMENT = 4; <font class="comment">// value of 0 means 'double in size'</font>
00118 
00119 <font class="preprocessor">#ifdef __gnuc__
</font>00120 <font class="preprocessor"></font><font class="preprocessor">#define TVALIST_PRE template &lt;class T&gt; 
</font>00121 <font class="preprocessor"></font><font class="preprocessor">#else
</font>00122 <font class="preprocessor"></font><font class="preprocessor">#define TVALIST_PRE template &lt;class T&gt; 
</font>00123 <font class="preprocessor"></font><font class="preprocessor">#endif
</font>00124 <font class="preprocessor"></font>
00125 
00126 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00127"></a><a class="code" href="class_skTVAList.html#a0">00127</a> TVALIST_PRE <font class="keyword">inline</font> <a class="code" href="class_skTVAList.html#a0">skTVAList&lt;T&gt;::skTVAList</a>()
00128      <font class="comment">//-----------------------------------------------------------------</font>
00129   :m_ArraySize(TVALIST_DEFAULT_SIZE),m_GrowthIncrement(TVALIST_DEFAULT_GROWTH_INCREMENT),m_Entries(0)<font class="keyword">
</font>00130 <font class="keyword"></font>{
00131   <font class="keywordflow">if</font>(TVALIST_DEFAULT_SIZE != 0)
00132     m_Array=<font class="keyword">new</font> T[TVALIST_DEFAULT_SIZE];
00133   <font class="keywordflow">else</font>
00134     m_Array = 0;                <font class="comment">// don't allocate space until needed</font>
00135 }
00136 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00137"></a><a class="code" href="class_skTVAList.html#a2">00137</a> TVALIST_PRE <font class="keyword">inline</font> <a class="code" href="class_skTVAList.html#a0">skTVAList&lt;T&gt;::skTVAList</a>(USize initial_size,USize growth_increment)
00138      <font class="comment">//-----------------------------------------------------------------</font>
00139   :m_ArraySize(initial_size),m_GrowthIncrement(growth_increment),m_Entries(0)<font class="keyword">
</font>00140 <font class="keyword"></font>{
00141   <font class="keywordflow">if</font>(m_ArraySize != 0)
00142     m_Array=<font class="keyword">new</font> T[m_ArraySize];
00143   <font class="keywordflow">else</font>
00144     m_Array = 0;                <font class="comment">// don't allocate space until needed</font>
00145 }
00146 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00147"></a><a class="code" href="class_skTVAList.html#a1">00147</a> TVALIST_PRE <font class="keyword">inline</font> <a class="code" href="class_skTVAList.html#a0">skTVAList&lt;T&gt;::skTVAList</a>(<font class="keyword">const</font> <a class="code" href="class_skTVAList.html">skTVAList</a>&amp; l)
00148      <font class="comment">//-----------------------------------------------------------------</font>
00149   : m_ArraySize(l.m_ArraySize),m_Entries(l.m_Entries),m_GrowthIncrement(l.m_GrowthIncrement)<font class="keyword">
</font>00150 <font class="keyword"></font>{
00151   <font class="keywordflow">if</font>(m_ArraySize){
00152     m_Array=<font class="keyword">new</font> T[m_ArraySize];
00153     <font class="keywordflow">for</font> (USize x=0;x&lt;m_Entries;x++)
00154       m_Array[x]=l.m_Array[x];
00155   }<font class="keywordflow">else</font>
00156     m_Array = 0;
00157 }
00158 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00159"></a><a class="code" href="class_skTVAList.html#a3">00159</a> TVALIST_PRE <font class="keyword">inline</font> <a class="code" href="class_skTVAList.html#a3">skTVAList&lt;T&gt;::~skTVAList</a>()
00160      <font class="comment">//-----------------------------------------------------------------</font>
00161 {
00162   <font class="keywordflow">if</font>(m_Array)
00163     <font class="keyword">delete</font> [] m_Array;
00164 }
00165 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00166"></a><a class="code" href="class_skTVAList.html#a5">00166</a> TVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_skTVAList.html#a5">skTVAList&lt;T&gt;::clear</a>()
00167      <font class="comment">//-----------------------------------------------------------------</font>
00168 {
00169   m_Entries=0;
00170   <font class="keywordflow">if</font>(m_Array)
00171     <font class="keyword">delete</font> [] m_Array;
00172   m_Array=0;
00173   m_ArraySize=0;
00174 }
00175 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00176"></a><a class="code" href="class_skTVAList.html#a6">00176</a> TVALIST_PRE <font class="keyword">inline</font> USize <a class="code" href="class_skTVAList.html#a6">skTVAList&lt;T&gt;::entries</a>() <font class="keyword">const</font>
00177      <font class="comment">//-----------------------------------------------------------------</font>
00178 {
00179   <font class="keywordflow">return</font> m_Entries;
00180 }
00181 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00182"></a><a class="code" href="class_skTVAList.html#a7">00182</a> TVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="class_skTVAList.html#a7">skTVAList&lt;T&gt;::deleteElt</a>(USize  n)
00183      <font class="comment">//-----------------------------------------------------------------</font>
00184 {
00185   assert(n&lt;m_Entries);
00186   <font class="keywordflow">if</font> (n&gt;=m_Entries)
00187     <font class="keywordflow">throw</font> skBoundsException(<font class="stringliteral">"Invalid index to DeleteElt"</font>,__FILE__,__LINE__);
00188   <font class="keywordflow">for</font> (USize x=n;x&lt;m_Entries-1;x++)
00189     m_Array[x]=m_Array[x+1];
00190   m_Entries--;
00191 }
00192 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00193"></a><a class="code" href="class_skTVAList.html#a9">00193</a> TVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="class_skTVAList.html#a9">skTVAList&lt;T&gt;::insert</a>(<font class="keyword">const</font> T &amp;t,USize index)
00194      <font class="comment">//-----------------------------------------------------------------</font>
00195 {
00196   assert(index&lt;=m_Entries);
00197   <font class="keywordflow">if</font> (index&gt;m_Entries)
00198     <font class="keywordflow">throw</font> skBoundsException(<font class="stringliteral">"Invalid index to Insert"</font>,__FILE__,__LINE__);
00199   <font class="keywordflow">if</font> (m_ArraySize==m_Entries)
00200     grow();
00201   <font class="keywordflow">if</font> (index&lt;m_Entries){
00202     <font class="keywordflow">for</font> (USize x=m_Entries;x&gt;index;x--)
00203       m_Array[x]=m_Array[x-1];
00204   }
00205   m_Array[index]=t;
00206   m_Entries++;
00207 }
00208 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00209"></a><a class="code" href="class_skTVAList.html#a8">00209</a> TVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="class_skTVAList.html#a8">skTVAList&lt;T&gt;::prepend</a>(<font class="keyword">const</font> T &amp;t)
00210      <font class="comment">//-----------------------------------------------------------------</font>
00211 {
00212   <font class="keywordflow">if</font> (m_ArraySize==m_Entries)
00213     grow();
00214   m_Entries++;
00215   <font class="keywordflow">for</font> (USize x=m_Entries-1;x&gt;=1;x--)
00216     m_Array[x]=m_Array[x-1];
00217   m_Array[0]=t;
00218 }
00219 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00220"></a><a class="code" href="class_skTVAList.html#a10">00220</a> TVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_skTVAList.html#a10">skTVAList&lt;T&gt;::append</a>(<font class="keyword">const</font> T &amp;t)
00221      <font class="comment">//-----------------------------------------------------------------</font>
00222 {
00223   <font class="keywordflow">if</font> (m_ArraySize==m_Entries)
00224     grow();
00225   m_Array[m_Entries]=t;
00226   m_Entries++;
00227 }
00228 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00229"></a><a class="code" href="class_skTVAList.html#a11">00229</a> TVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="class_skTVAList.html#a11">skTVAList&lt;T&gt;::remove</a>(<font class="keyword">const</font> T &amp;t)
00230      <font class="comment">//-----------------------------------------------------------------</font>
00231 {
00232   <font class="keywordtype">int</font> index = findElt(t);
00233   assert(index&gt;=0 &amp;&amp; <font class="stringliteral">"VAList does not contain item"</font>!=0);
00234   <font class="keywordflow">if</font> (index&gt;=0){
00235     <font class="keywordflow">for</font> (USize x=(USize)index;x&lt;m_Entries-1;x++)
00236       m_Array[x]=m_Array[x+1];
00237 
00238     m_Entries--;
00239   }
00240 }
00241 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00242"></a><a class="code" href="class_skTVAList.html#a12">00242</a> TVALIST_PRE <font class="keyword">inline</font> T&amp; <a class="code" href="class_skTVAList.html#a12">skTVAList&lt;T&gt;::operator[]</a>(USize  n) <font class="keyword">const</font>
00243      <font class="comment">//-----------------------------------------------------------------</font>
00244 {
00245   assert(n&lt;m_Entries);
00246   <font class="keywordflow">if</font> (n&gt;=m_Entries)
00247     <font class="keywordflow">throw</font> skBoundsException(<font class="stringliteral">"Invalid index to []"</font>,__FILE__,__LINE__);
00248   <font class="keywordflow">return</font> m_Array[n];
00249 }
00250 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00251"></a><a class="code" href="class_skTVAList.html#a13">00251</a> TVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_skTVAList.html#a13">skTVAList&lt;T&gt;::index</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>
00252      <font class="comment">//-----------------------------------------------------------------</font>
00253 {
00254   <font class="keywordflow">return</font> (USize)findElt(t);
00255 }
00256 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00257"></a><a class="code" href="class_skTVAList.html#a14">00257</a> TVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_skTVAList.html#a14">skTVAList&lt;T&gt;::contains</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>
00258      <font class="comment">//-----------------------------------------------------------------</font>
00259 {
00260   <font class="keywordflow">return</font> (<font class="keywordtype">bool</font>)(findElt(t) &gt;= 0);
00261 }
00262 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00263"></a><a class="code" href="class_skTVAList.html#a4">00263</a> TVALIST_PRE <a class="code" href="class_skTVAList.html">skTVAList</a>&lt;T&gt;&amp; <a class="code" href="class_skTVAList.html#a4">skTVAList&lt;T&gt;::operator=</a>(<font class="keyword">const</font> <a class="code" href="class_skTVAList.html">skTVAList</a>&lt;T&gt;&amp; l)
00264      <font class="comment">//-----------------------------------------------------------------</font>
00265 {
00266   <font class="keywordflow">if</font> (&amp;l!=<font class="keyword">this</font>){
00267     clear();
00268     m_ArraySize=l.m_ArraySize;
00269     m_Entries=l.m_Entries;
00270     m_GrowthIncrement=l.m_GrowthIncrement;
00271     <font class="keywordflow">if</font>(m_Entries){
00272       m_Array=<font class="keyword">new</font> T[m_ArraySize];
00273       <font class="keywordflow">for</font> (USize x=0;x&lt;m_Entries;x++)           <font class="comment">//??use memcopy for speed</font>
00274         m_Array[x]=l.m_Array[x];
00275     }<font class="keywordflow">else</font>{
00276       m_Array=0;        <font class="comment">// don't allocate until needed</font>
00277       m_ArraySize=0;
00278     }
00279   }
00280   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00281 }
00282 <font class="comment">// Returns -1 if not found.</font>
00283 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00284"></a><a class="code" href="class_skTVAList.html#b0">00284</a> TVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_skTVAList.html#b0">skTVAList&lt;T&gt;::findElt</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>
00285      <font class="comment">//-----------------------------------------------------------------</font>
00286 {
00287   <font class="keywordflow">for</font> (USize index=0;index&lt;m_Entries;index++){
00288     <font class="keywordflow">if</font> (m_Array[index]==t)
00289       <font class="keywordflow">return</font> (<font class="keywordtype">int</font>)index;                <font class="comment">// jump out</font>
00290   }
00291   <font class="keywordflow">return</font> -1;
00292 }
00293 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00294"></a><a class="code" href="class_skTVAList.html#b1">00294</a> TVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="class_skTVAList.html#b1">skTVAList&lt;T&gt;::grow</a>()
00295      <font class="comment">//-----------------------------------------------------------------</font>
00296 {
00297   <font class="keywordflow">if</font>(m_GrowthIncrement != 0)
00298     m_ArraySize += m_GrowthIncrement;   <font class="comment">// constant increase in size</font>
00299   <font class="keywordflow">else</font>{
00300     <font class="keywordflow">if</font>(m_ArraySize==0)
00301       m_ArraySize = 1;
00302     <font class="keywordflow">else</font>
00303       m_ArraySize *= 2;                 <font class="comment">// double size</font>
00304   }
00305 
00306   T *  new_array=<font class="keyword">new</font> T[m_ArraySize];
00307   <font class="keywordflow">if</font>(m_Array){
00308     <font class="keywordflow">for</font> (USize x=0;x&lt;m_Entries;x++)             <font class="comment">//??use memcopy for speed</font>
00309       new_array[x]=m_Array[x];
00310     <font class="keyword">delete</font> [] m_Array;
00311   }
00312   m_Array=new_array;
00313 }
00314 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00315"></a><a class="code" href="class_skTVAList.html#a15">00315</a> TVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="class_skTVAList.html#a15">skTVAList&lt;T&gt;::growTo</a>(USize new_size)
00316      <font class="comment">//-----------------------------------------------------------------</font>
00317 {
00318   <font class="keywordflow">if</font> (new_size&gt;m_ArraySize){
00319     m_ArraySize=new_size;
00320 
00321     T *  new_array=<font class="keyword">new</font> T[m_ArraySize];
00322     <font class="keywordflow">if</font>(m_Array){
00323       <font class="keywordflow">for</font> (USize x=0;x&lt;m_Entries;x++)           <font class="comment">//??use memcopy for speed</font>
00324         new_array[x]=m_Array[x];
00325       <font class="keyword">delete</font> [] m_Array;
00326     }
00327     m_Array=new_array;
00328   }
00329 }
00330 
00331 <font class="preprocessor">#endif
</font></div></pre><hr><address><small>Generated at Mon Mar 5 16:00:30 2001 for Simkin by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.0 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
