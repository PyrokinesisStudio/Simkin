<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Test.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>Test.h</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">  Copyright 1996-2002</span>
00003 <span class="comment">  Simon Whiteside</span>
00004 <span class="comment"></span>
00005 <span class="comment">    This library is free software; you can redistribute it and/or</span>
00006 <span class="comment">    modify it under the terms of the GNU Lesser General Public</span>
00007 <span class="comment">    License as published by the Free Software Foundation; either</span>
00008 <span class="comment">    version 2 of the License, or (at your option) any later version.</span>
00009 <span class="comment"></span>
00010 <span class="comment">    This library is distributed in the hope that it will be useful,</span>
00011 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00013 <span class="comment">    Lesser General Public License for more details.</span>
00014 <span class="comment"></span>
00015 <span class="comment">    You should have received a copy of the GNU Lesser General Public</span>
00016 <span class="comment">    License along with this library; if not, write to the Free Software</span>
00017 <span class="comment">    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00018 <span class="comment">*/</span>
00019 <span class="comment">/*</span>
00020 <span class="comment"> * This small class can be used to trace calls into an iterator from a foreach statement in a script</span>
00021 <span class="comment"> */</span>
00022 <span class="keyword">class </span>skTestIterator : <span class="keyword">public</span> <a class="code" href="classskExecutableIterator.html">skExecutableIterator</a> {
00023   <span class="keywordtype">int</span> m_Count;
00024 <span class="keyword">public</span>:
00025   skTestIterator() : m_Count(0){
00026   }
00027   <span class="keywordtype">bool</span> next(<a class="code" href="classskRValue.html">skRValue</a>&amp; v){
00028     <span class="keywordtype">bool</span> ret=<span class="keyword">false</span>;
00029     <span class="keywordflow">if</span> (m_Count&lt;10){
00030       v=m_Count;
00031       <a class="code" href="classskTracer.html#d0">skTracer::trace</a>(skSTR(<span class="stringliteral">"skTestIterator::next\n"</span>));
00032       m_Count++;
00033       ret=<span class="keyword">true</span>;
00034     }
00035     <span class="keywordflow">return</span> ret;
00036   }
00037 };
00038 <span class="comment">/*</span>
00039 <span class="comment"> * You can use this small class to trace calls into a C++ object from a script. The class supports the method "createObject" and an instance is put as a global variable called "Test". This means you can do the following in Simkin script:</span>
00040 <span class="comment"> * &lt;pre&gt;</span>
00041 <span class="comment"> * a=Test.createObject();</span>
00042 <span class="comment"> * b=a:name;</span>
00043 <span class="comment"> * &lt;/pre&gt;</span>
00044 <span class="comment"> * And watch a trace of the "getValue" function being called</span>
00045 <span class="comment"> */</span>
00046 
00047 <span class="keyword">class </span>skTest : <span class="keyword">public</span> <a class="code" href="classskExecutable.html">skExecutable</a>{
00048 <span class="keyword">public</span>:
00049   skTest(){
00050   }
00051   <a class="code" href="classskExecutableIterator.html">skExecutableIterator</a> * createIterator(<span class="keyword">const</span> <a class="code" href="classskString.html">skString</a>&amp; qualifier){
00052     <a class="code" href="classskTracer.html#d0">skTracer::trace</a>(skSTR(<span class="stringliteral">"skTest::createIterator qualified by "</span>)+qualifier+skSTR(<span class="stringliteral">"\n"</span>));
00053     <span class="keywordflow">return</span> <span class="keyword">new</span> skTestIterator();
00054   }
00055   <a class="code" href="classskExecutableIterator.html">skExecutableIterator</a> * createIterator(){
00056     <a class="code" href="classskTracer.html#d0">skTracer::trace</a>(skSTR(<span class="stringliteral">"skTest::createIterator\n"</span>));
00057     <span class="keywordflow">return</span> <span class="keyword">new</span> skTestIterator();
00058   }
00059   <span class="keywordtype">bool</span> getValue(<span class="keyword">const</span> <a class="code" href="classskString.html">skString</a>&amp; field_name,<span class="keyword">const</span> <a class="code" href="classskString.html">skString</a>&amp; attribute,<a class="code" href="classskRValue.html">skRValue</a>&amp; value){
00060     <a class="code" href="classskTracer.html#d0">skTracer::trace</a>(skSTR(<span class="stringliteral">"skTest::getValue field_name="</span>)+field_name+skSTR(<span class="stringliteral">" attribute="</span>)+attribute+skSTR(<span class="stringliteral">"\n"</span>));
00061     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00062   }
00063   <span class="keywordtype">bool</span> setValue(<span class="keyword">const</span> <a class="code" href="classskString.html">skString</a>&amp; field_name,<span class="keyword">const</span> <a class="code" href="classskString.html">skString</a>&amp; attribute,<span class="keyword">const</span> <a class="code" href="classskRValue.html">skRValue</a>&amp; value){
00064     <a class="code" href="classskTracer.html#d0">skTracer::trace</a>(skSTR(<span class="stringliteral">"skTest::setValue field_name="</span>)+field_name+skSTR(<span class="stringliteral">" attribute="</span>)+attribute+skSTR(<span class="stringliteral">"\n"</span>));
00065     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00066   }
00067   <span class="keywordtype">bool</span> setValueAt(<span class="keyword">const</span> <a class="code" href="classskRValue.html">skRValue</a>&amp; array_index, <span class="keyword">const</span> <a class="code" href="classskString.html">skString</a>&amp; attribute,<span class="keyword">const</span> <a class="code" href="classskRValue.html">skRValue</a>&amp; value)
00068   {
00069     <a class="code" href="classskTracer.html#d0">skTracer::trace</a>(skSTR(<span class="stringliteral">"skTest::setValueAt array_index"</span>)+array_index.<a class="code" href="classskRValue.html#a16">str</a>()+skSTR(<span class="stringliteral">" attribute="</span>)+attribute+skSTR(<span class="stringliteral">" value="</span>)+value.<a class="code" href="classskRValue.html#a16">str</a>()+skSTR(<span class="stringliteral">"\n"</span>));
00070     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00071   }
00072 
00073   <span class="keywordtype">bool</span> getValueAt(<span class="keyword">const</span> <a class="code" href="classskRValue.html">skRValue</a>&amp; array_index, <span class="keyword">const</span> <a class="code" href="classskString.html">skString</a>&amp; attribute, <a class="code" href="classskRValue.html">skRValue</a>&amp; value)
00074   {
00075     <a class="code" href="classskTracer.html#d0">skTracer::trace</a>(skSTR(<span class="stringliteral">"skTest::getValueAt array_index="</span>)+array_index.<a class="code" href="classskRValue.html#a16">str</a>()+skSTR(<span class="stringliteral">" attribute="</span>)+attribute+skSTR(<span class="stringliteral">"\n"</span>));
00076     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00077   }
00078   <span class="keywordtype">bool</span> method(<span class="keyword">const</span> <a class="code" href="classskString.html">skString</a>&amp; method_name,<a class="code" href="classskRValueArray.html">skRValueArray</a>&amp; arguments,<a class="code" href="classskRValue.html">skRValue</a>&amp; return_value,<a class="code" href="classskExecutableContext.html">skExecutableContext</a>&amp; ctxt)
00079   {
00080     <a class="code" href="classskTracer.html#d0">skTracer::trace</a>(skSTR(<span class="stringliteral">"skTest::method method_name="</span>)+method_name+skSTR(<span class="stringliteral">"\n"</span>));
00081     <span class="keywordtype">bool</span> bRet=<span class="keyword">false</span>;
00082     <span class="keywordflow">if</span> (method_name==skSTR(<span class="stringliteral">"createObject"</span>)){
00083       return_value=<a class="code" href="classskRValue.html">skRValue</a>(<span class="keyword">new</span> skTest(),<span class="keyword">true</span>);
00084       bRet=<span class="keyword">true</span>;
00085     }<span class="keywordflow">else</span>{
00086       bRet=<a class="code" href="classskExecutable.html#a12">skExecutable::method</a>(method_name,arguments,return_value,ctxt);
00087     }
00088     <span class="keywordflow">return</span> bRet;
00089   }
00090 };
00091 
</pre></div><hr><address style="align: right;"><small>Generated on Mon Dec 16 16:30:12 2002 for Simkin by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc1 </small></address>
</body>
</html>
