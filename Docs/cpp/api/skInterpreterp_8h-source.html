<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>skInterpreterp.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>skInterpreterp.h</h1><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">        Interpreter implementation class</font>
00003 <font class="comment">        $Id: skInterpreterp.h,v 1.28 2001/11/16 23:03:24 sdw Exp $</font>
00004 <font class="comment">        Copyright 1996-2001</font>
00005 <font class="comment">        Simon Whiteside</font>
00006 <font class="comment">*/</font>
00007 
00008 <font class="preprocessor">#include "skParseNode.h"</font>
00009 <font class="preprocessor">#include "skExecutableIterator.h"</font>
00010 <font class="preprocessor">#include "skRValueTable.h"</font>
00011 
<a name="l00015"></a><a class="code" href="classP__Interpreter.html">00015</a> <font class="keyword">class </font><a class="code" href="classP__Interpreter.html">P_Interpreter</a> 
00016 {   
00017  <font class="keyword">public</font>:
00019   <a class="code" href="classP__Interpreter.html#a0">P_Interpreter</a>();
00021   <a class="code" href="classP__Interpreter.html#a1">~P_Interpreter</a>();
00022                                                 
00023 
00024     <font class="comment">// Expression evaluation</font>
00025   
00032   <a class="code" href="classskRValue.html">skRValue</a> <a class="code" href="classP__Interpreter.html#a2">evaluate</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skExprNode * n);
00039   <a class="code" href="classskRValue.html">skRValue</a> <a class="code" href="classP__Interpreter.html#a3">evalMethod</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skIdListNode * ids);
00050   <font class="keywordtype">void</font> <a class="code" href="classP__Interpreter.html#a4">makeMethodCall</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,<a class="code" href="classskRValue.html">skRValue</a>&amp; robject,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; method_name,skExprNode * array_index, <font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; attribute,skExprListNode * exprs,<a class="code" href="classskRValue.html">skRValue</a>&amp; ret);
00051   
00052     <font class="comment">// Statement execution</font>
00053 
00060   <font class="keywordtype">void</font> <a class="code" href="classP__Interpreter.html#a5">executeAssignStat</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skAssignNode * n);
00061   
00062     <font class="comment">// the statements below return true to halt further processing (i.e. a return statement has been encountered)</font>
00063 
00072   <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a6">executeStat</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skStatNode * pstat,<a class="code" href="classskRValue.html">skRValue</a>&amp; r);
00073 
00082   <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a7">executeStats</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skStatListNode * n,<a class="code" href="classskRValue.html">skRValue</a>&amp; r);
00083 
00092   <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a8">executeReturnStat</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skReturnNode * n,<a class="code" href="classskRValue.html">skRValue</a>&amp; r);
00093 
00102   <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a9">executeIfStat</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skIfNode * n,<a class="code" href="classskRValue.html">skRValue</a>&amp; r);
00103 
00112   <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a10">executeWhileStat</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skWhileNode * n,<a class="code" href="classskRValue.html">skRValue</a>&amp; r);
00113 
00122   <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a11">executeSwitchStat</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skSwitchNode * n,<a class="code" href="classskRValue.html">skRValue</a>&amp; r);
00123 
00132   <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a12">executeForEachStat</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skForEachNode * n,<a class="code" href="classskRValue.html">skRValue</a>&amp; r);
00133 
00142   <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a13">executeForStat</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skForNode * n,<a class="code" href="classskRValue.html">skRValue</a>&amp; r);
00143 
00144     <font class="comment">// Misc runtime routines</font>
00145 
00151     <font class="keywordtype">void</font> <a class="code" href="classP__Interpreter.html#a14">addLocalVariable</a>(<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; name,<a class="code" href="classskRValue.html">skRValue</a> value); 
00158     <a class="code" href="classskString.html">skString</a> <a class="code" href="classP__Interpreter.html#a15">checkIndirectId</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; name); 
00168     <a class="code" href="classskRValue.html">skRValue</a> <a class="code" href="classP__Interpreter.html#a16">findValue</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; name,skExprNode * array_index,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; attribute); 
00174     <font class="keywordtype">void</font> <a class="code" href="classP__Interpreter.html#a17">runtimeError</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; s); 
00182     <font class="keywordtype">void</font> <a class="code" href="classP__Interpreter.html#a18">followIdList</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,skIdListNode * idList,<a class="code" href="classskRValue.html">skRValue</a>&amp; object); 
00183 
00187     <font class="keywordtype">void</font> <a class="code" href="classP__Interpreter.html#a19">trace</a>(<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; s);
00188 
00199     <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a20">extractFieldArrayValue</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,<a class="code" href="classskRValue.html">skRValue</a>&amp; robject,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; field_name,skExprNode * array_index,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; attrib,<a class="code" href="classskRValue.html">skRValue</a>&amp; ret);
00209     <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a21">extractArrayValue</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,<a class="code" href="classskRValue.html">skRValue</a>&amp; robject,skExprNode * array_index,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; attrib,<a class="code" href="classskRValue.html">skRValue</a>&amp; ret) ;
00217     <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a22">extractValue</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskRValue.html">skRValue</a>&amp; robject,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; name,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; attrib,<a class="code" href="classskRValue.html">skRValue</a>&amp; ret) ;
00218     
00227     <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a23">insertArrayValue</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,<a class="code" href="classskRValue.html">skRValue</a>&amp; robject, skExprNode * array_index,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; attr,<font class="keyword">const</font> <a class="code" href="classskRValue.html">skRValue</a>&amp; value);
00235     <font class="keywordtype">bool</font> <a class="code" href="classP__Interpreter.html#a24">insertValue</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskRValue.html">skRValue</a>&amp; robject,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; name, <font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; attr,<font class="keyword">const</font> <a class="code" href="classskRValue.html">skRValue</a>&amp; value);
00236 
00237     <font class="comment">// Variables</font>
<a name="l00239"></a><a class="code" href="classP__Interpreter.html#m0">00239</a> <font class="comment"></font>    <a class="code" href="classskRValueTable.html">skRValueTable</a> m_GlobalVars; 
<a name="l00241"></a><a class="code" href="classP__Interpreter.html#m1">00241</a>     <font class="keywordtype">bool</font> m_Tracing; 
<a name="l00243"></a><a class="code" href="classP__Interpreter.html#m2">00243</a>     <a class="code" href="classskTraceCallback.html">skTraceCallback</a> * m_TraceCallback; 
<a name="l00245"></a><a class="code" href="classP__Interpreter.html#m3">00245</a>     <a class="code" href="classskStatementStepper.html">skStatementStepper</a> * m_StatementStepper; <font class="comment">// the statement stepper</font>
00247 <font class="comment"></font>    THREAD <font class="keyword">static</font> <a class="code" href="classskInterpreter.html">skInterpreter</a> * g_GlobalInterpreter;  <font class="comment">//      used by clients - one per thread (on Windows only at the moment)</font>
00248 
00249 };    
00250 
00251 <font class="comment">//---------------------------------------------------</font>
<a name="l00252"></a><a class="code" href="classP__Interpreter.html#a15">00252</a> <font class="keyword">inline</font> <a class="code" href="classskString.html">skString</a> <a class="code" href="classP__Interpreter.html#a15">P_Interpreter::checkIndirectId</a>(<a class="code" href="classskContext.html">skContext</a>&amp; ctxt,<a class="code" href="classskiExecutable.html">skiExecutable</a> * obj,<a class="code" href="classskRValueTable.html">skRValueTable</a>&amp; var,<font class="keyword">const</font> <a class="code" href="classskString.html">skString</a>&amp; name)
00253 <font class="comment">//---------------------------------------------------</font>
00254 {
00255   <font class="comment">// look for an initial "@" in a field name, and de-reference it if necessary</font>
00256     <a class="code" href="classskString.html">skString</a> ret=name;
00257     <font class="keywordflow">if</font> (name.at(0)==<font class="charliteral">'@'</font>){
00258         ret=name.substr(1,name.length()-1);
00259         <a class="code" href="classskRValue.html">skRValue</a> new_name=findValue(ctxt,obj,var,ret,0,skString());
00260         ret=new_name.<a class="code" href="classskRValue.html#a16">str</a>();
00261     }
00262     <font class="keywordflow">return</font> ret;
00263 }       
</pre></div><hr><address><small>Generated on Tue Nov 20 17:56:21 2001 for Simkin by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.11.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
