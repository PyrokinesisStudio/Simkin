<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>skValist.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>skValist.h</h1><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">  Copyright 1996-2001</font>
00003 <font class="comment">  Simon Whiteside</font>
00004 <font class="comment"></font>
00005 <font class="comment">* $Id: skValist_8h-source.html,v 1.1 2001/11/27 11:47:02 sdw Exp $</font>
00006 <font class="comment">*/</font>
00007 
00008 <font class="preprocessor">#ifndef skVALIST_H</font>
00009 <font class="preprocessor"></font><font class="preprocessor">#define skVALIST_H</font>
00010 <font class="preprocessor"></font>
00011 
00012 <font class="preprocessor">#include "skGeneral.h"</font>
00013 <font class="preprocessor">#include "skBoundsException.h"</font>
00014     
<a name="l00018"></a><a class="code" href="classskTVAList.html">00018</a> template &lt;class T&gt; <font class="keyword">class </font><a class="code" href="classskTVAList.html">skTVAList</a> 
00019 {         
00020  <font class="keyword">public</font>:
00024   <a class="code" href="classskTVAList.html#a0">skTVAList</a>();
00028   <a class="code" href="classskTVAList.html#a0">skTVAList</a>(<font class="keyword">const</font> <a class="code" href="classskTVAList.html">skTVAList&lt;T&gt;</a>&amp;);
00032   <a class="code" href="classskTVAList.html#a0">skTVAList</a>(USize initial_size,USize growth_increment);
00036   <font class="keyword">virtual</font> <a class="code" href="classskTVAList.html#a3">~skTVAList</a>();                                 
00040   <a class="code" href="classskTVAList.html">skTVAList</a>&amp; <a class="code" href="classskTVAList.html#a4">operator=</a>(<font class="keyword">const</font> <a class="code" href="classskTVAList.html">skTVAList&lt;T&gt;</a>&amp;);
00044   <font class="keywordtype">void</font>  <a class="code" href="classskTVAList.html#a5">clear</a>();                                        
00048   USize <a class="code" href="classskTVAList.html#a6">entries</a>() <font class="keyword">const</font>;
00053   <font class="keywordtype">void</font>  <a class="code" href="classskTVAList.html#a7">deleteElt</a>(USize  n);
00057   <font class="keywordtype">void</font>  <a class="code" href="classskTVAList.html#a8">prepend</a>(<font class="keyword">const</font> T &amp;t);
00062   <font class="keywordtype">void</font>  <a class="code" href="classskTVAList.html#a9">insert</a>(<font class="keyword">const</font> T &amp;t,USize index);
00066   <font class="keywordtype">void</font>  <a class="code" href="classskTVAList.html#a10">append</a>(<font class="keyword">const</font> T &amp;t);
00070   <font class="keywordtype">void</font>  <a class="code" href="classskTVAList.html#a11">remove</a>(<font class="keyword">const</font> T &amp;t);     
00076   T&amp; <a class="code" href="classskTVAList.html#a12">operator[]</a>(USize  n) <font class="keyword">const</font>;
00081   <font class="keywordtype">int</font> <a class="code" href="classskTVAList.html#a13">index</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>;
00086   <font class="keywordtype">bool</font>  <a class="code" href="classskTVAList.html#a14">contains</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>;
00090   <font class="keywordtype">void</font>  <a class="code" href="classskTVAList.html#a15">growTo</a>(USize new_size);
00091  <font class="keyword">protected</font>:
00095   <font class="keywordtype">int</font>   <a class="code" href="classskTVAList.html#b0">findElt</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>;
00099   <font class="keywordtype">void</font>  <a class="code" href="classskTVAList.html#b1">grow</a>();
<a name="l00103"></a><a class="code" href="classskTVAList.html#n0">00103</a>   T*  m_Array;  
<a name="l00107"></a><a class="code" href="classskTVAList.html#n1">00107</a>   USize m_ArraySize;
<a name="l00111"></a><a class="code" href="classskTVAList.html#n2">00111</a>   USize m_Entries;
<a name="l00115"></a><a class="code" href="classskTVAList.html#n3">00115</a>   USize m_GrowthIncrement;
00116 };        
00117 <font class="keyword">const</font> <font class="keywordtype">int</font> skTVALIST_DEFAULT_SIZE = 0;                                   <font class="comment">// so array not allocated until needed</font>
00118 <font class="keyword">const</font> <font class="keywordtype">int</font> skTVALIST_DEFAULT_GROWTH_INCREMENT = 4;       <font class="comment">// value of 0 means 'double in size'</font>
00119 
00120 <font class="preprocessor">#ifdef __gnuc__</font>
00121 <font class="preprocessor"></font><font class="preprocessor">#define skTVALIST_PRE template &lt;class T&gt; </font>
00122 <font class="preprocessor"></font><font class="preprocessor">#else</font>
00123 <font class="preprocessor"></font><font class="preprocessor">#define skTVALIST_PRE template &lt;class T&gt; </font>
00124 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00125 <font class="preprocessor"></font>
00126 
00127 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00128"></a><a class="code" href="classskTVAList.html#a0">00128</a> skTVALIST_PRE <font class="keyword">inline</font> <a class="code" href="classskTVAList.html#a0">skTVAList&lt;T&gt;::skTVAList</a>()
00129      <font class="comment">//-----------------------------------------------------------------</font>
00130   :m_ArraySize(skTVALIST_DEFAULT_SIZE),m_GrowthIncrement(skTVALIST_DEFAULT_GROWTH_INCREMENT),m_Entries(0)<font class="keyword"></font>
00131 <font class="keyword"></font>{
00132   <font class="keywordflow">if</font>(skTVALIST_DEFAULT_SIZE != 0)
00133     m_Array=<font class="keyword">new</font> T[skTVALIST_DEFAULT_SIZE];
00134   <font class="keywordflow">else</font>
00135     m_Array = 0;                <font class="comment">// don't allocate space until needed</font>
00136 }
00137 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00138"></a><a class="code" href="classskTVAList.html#a2">00138</a> skTVALIST_PRE <font class="keyword">inline</font> <a class="code" href="classskTVAList.html#a0">skTVAList&lt;T&gt;::skTVAList</a>(USize initial_size,USize growth_increment)
00139      <font class="comment">//-----------------------------------------------------------------</font>
00140   :m_ArraySize(initial_size),m_GrowthIncrement(growth_increment),m_Entries(0)<font class="keyword"></font>
00141 <font class="keyword"></font>{
00142   <font class="keywordflow">if</font>(m_ArraySize != 0)
00143     m_Array=<font class="keyword">new</font> T[m_ArraySize];
00144   <font class="keywordflow">else</font>
00145     m_Array = 0;                <font class="comment">// don't allocate space until needed</font>
00146 }
00147 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00148"></a><a class="code" href="classskTVAList.html#a1">00148</a> skTVALIST_PRE <font class="keyword">inline</font> <a class="code" href="classskTVAList.html#a0">skTVAList&lt;T&gt;::skTVAList</a>(<font class="keyword">const</font> <a class="code" href="classskTVAList.html">skTVAList</a>&amp; l)
00149      <font class="comment">//-----------------------------------------------------------------</font>
00150   : m_ArraySize(l.m_ArraySize),m_Entries(l.<a class="code" href="classskTVAList.html#n2">m_Entries</a>),m_GrowthIncrement(l.<a class="code" href="classskTVAList.html#n3">m_GrowthIncrement</a>)<font class="keyword"></font>
00151 <font class="keyword"></font>{
00152   <font class="keywordflow">if</font>(m_ArraySize){
00153     m_Array=<font class="keyword">new</font> T[m_ArraySize];
00154     <font class="keywordflow">for</font> (USize x=0;x&lt;m_Entries;x++)
00155       m_Array[x]=l.<a class="code" href="classskTVAList.html#n0">m_Array</a>[x];
00156   }<font class="keywordflow">else</font>
00157     m_Array = 0;
00158 }
00159 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00160"></a><a class="code" href="classskTVAList.html#a3">00160</a> skTVALIST_PRE <font class="keyword">inline</font> <a class="code" href="classskTVAList.html#a3">skTVAList&lt;T&gt;::~skTVAList</a>()
00161      <font class="comment">//-----------------------------------------------------------------</font>
00162 {
00163   <font class="keywordflow">if</font>(m_Array)
00164     <font class="keyword">delete</font> [] m_Array;
00165 }
00166 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00167"></a><a class="code" href="classskTVAList.html#a5">00167</a> skTVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classskTVAList.html">skTVAList&lt;T&gt;</a>::clear()
00168      <font class="comment">//-----------------------------------------------------------------</font>
00169 {
00170   m_Entries=0;
00171   <font class="keywordflow">if</font>(m_Array)
00172     <font class="keyword">delete</font> [] m_Array;
00173   m_Array=0;
00174   m_ArraySize=0;
00175 }
00176 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00177"></a><a class="code" href="classskTVAList.html#a6">00177</a> skTVALIST_PRE <font class="keyword">inline</font> USize <a class="code" href="classskTVAList.html">skTVAList&lt;T&gt;</a>::entries() <font class="keyword">const</font>
00178      <font class="comment">//-----------------------------------------------------------------</font>
00179 {
00180   <font class="keywordflow">return</font> m_Entries;
00181 }
00182 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00183"></a><a class="code" href="classskTVAList.html#a7">00183</a> skTVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="classskTVAList.html">skTVAList&lt;T&gt;</a>::deleteElt(USize  n)
00184      <font class="comment">//-----------------------------------------------------------------</font>
00185 {
00186   assert(n&lt;m_Entries);
00187   <font class="keywordflow">if</font> (n&gt;=m_Entries)
00188     THROW(skBoundsException(<font class="stringliteral">"Invalid index to DeleteElt"</font>,__FILE__,__LINE__),skBoundsException_Code);
00189   <font class="keywordflow">for</font> (USize x=n;x&lt;m_Entries-1;x++)
00190     m_Array[x]=m_Array[x+1];
00191   m_Entries--;
00192 }
00193 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00194"></a><a class="code" href="classskTVAList.html#a9">00194</a> skTVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="classskTVAList.html#a9">skTVAList&lt;T&gt;::insert</a>(<font class="keyword">const</font> T &amp;t,USize index)
00195      <font class="comment">//-----------------------------------------------------------------</font>
00196 {
00197   assert(index&lt;=m_Entries);
00198   <font class="keywordflow">if</font> (index&gt;m_Entries)
00199     THROW(skBoundsException(<font class="stringliteral">"Invalid index to Insert"</font>,__FILE__,__LINE__),skBoundsException_Code);
00200   <font class="keywordflow">if</font> (m_ArraySize==m_Entries)
00201     grow();
00202   <font class="keywordflow">if</font> (index&lt;m_Entries){
00203     <font class="keywordflow">for</font> (USize x=m_Entries;x&gt;index;x--)
00204       m_Array[x]=m_Array[x-1];
00205   }
00206   m_Array[index]=t;
00207   m_Entries++;
00208 }
00209 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00210"></a><a class="code" href="classskTVAList.html#a8">00210</a> skTVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="classskTVAList.html#a8">skTVAList&lt;T&gt;::prepend</a>(<font class="keyword">const</font> T &amp;t)
00211      <font class="comment">//-----------------------------------------------------------------</font>
00212 {
00213   <font class="keywordflow">if</font> (m_ArraySize==m_Entries)
00214     grow();
00215   m_Entries++;
00216   <font class="keywordflow">for</font> (USize x=m_Entries-1;x&gt;=1;x--)
00217     m_Array[x]=m_Array[x-1];
00218   m_Array[0]=t;
00219 }
00220 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00221"></a><a class="code" href="classskTVAList.html#a10">00221</a> skTVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classskTVAList.html#a10">skTVAList&lt;T&gt;::append</a>(<font class="keyword">const</font> T &amp;t)
00222      <font class="comment">//-----------------------------------------------------------------</font>
00223 {
00224   <font class="keywordflow">if</font> (m_ArraySize==m_Entries)
00225     grow();
00226   m_Array[m_Entries]=t;
00227   m_Entries++;
00228 }
00229 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00230"></a><a class="code" href="classskTVAList.html#a11">00230</a> skTVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="classskTVAList.html#a11">skTVAList&lt;T&gt;::remove</a>(<font class="keyword">const</font> T &amp;t)
00231      <font class="comment">//-----------------------------------------------------------------</font>
00232 {
00233   <font class="keywordtype">int</font> index = findElt(t);
00234   assert(index&gt;=0 &amp;&amp; <font class="stringliteral">"VAList does not contain item"</font>!=0);
00235   <font class="keywordflow">if</font> (index&gt;=0){
00236     <font class="keywordflow">for</font> (USize x=(USize)index;x&lt;m_Entries-1;x++)
00237       m_Array[x]=m_Array[x+1];
00238 
00239     m_Entries--;
00240   }
00241 }
00242 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00243"></a><a class="code" href="classskTVAList.html#a12">00243</a> skTVALIST_PRE <font class="keyword">inline</font> T&amp; <a class="code" href="classskTVAList.html#a12">skTVAList&lt;T&gt;::operator[]</a>(USize  n) <font class="keyword">const</font>
00244      <font class="comment">//-----------------------------------------------------------------</font>
00245 {
00246   assert(n&lt;m_Entries);
00247   <font class="keywordflow">if</font> (n&gt;=m_Entries)
00248     THROW(skBoundsException(skSTR(<font class="stringliteral">"Invalid index to []"</font>),__FILE__,__LINE__),skBoundsException_Code);
00249   <font class="keywordflow">return</font> m_Array[n];
00250 }
00251 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00252"></a><a class="code" href="classskTVAList.html#a13">00252</a> skTVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="classskTVAList.html#a13">skTVAList&lt;T&gt;::index</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>
00253      <font class="comment">//-----------------------------------------------------------------</font>
00254 {
00255   <font class="keywordflow">return</font> (USize)findElt(t);
00256 }
00257 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00258"></a><a class="code" href="classskTVAList.html#a14">00258</a> skTVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classskTVAList.html#a14">skTVAList&lt;T&gt;::contains</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>
00259      <font class="comment">//-----------------------------------------------------------------</font>
00260 {
00261   <font class="keywordflow">return</font> (<font class="keywordtype">bool</font>)(findElt(t) &gt;= 0);
00262 }
00263 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00264"></a><a class="code" href="classskTVAList.html#a4">00264</a> skTVALIST_PRE <a class="code" href="classskTVAList.html">skTVAList&lt;T&gt;</a>&amp; <a class="code" href="classskTVAList.html#a4">skTVAList&lt;T&gt;::operator=</a>(<font class="keyword">const</font> <a class="code" href="classskTVAList.html">skTVAList&lt;T&gt;</a>&amp; l)
00265      <font class="comment">//-----------------------------------------------------------------</font>
00266 {
00267   <font class="keywordflow">if</font> (&amp;l!=<font class="keyword">this</font>)<font class="keyword"></font>{
00268     <a class="code" href="classskTVAList.html#a5">clear</a>();
00269     m_ArraySize=l.m_ArraySize;
00270     m_Entries=l.m_Entries;
00271     m_GrowthIncrement=l.m_GrowthIncrement;
00272     <font class="keywordflow">if</font>(m_Entries){
00273       m_Array=<font class="keyword">new</font> T[m_ArraySize];
00274       <font class="keywordflow">for</font> (USize x=0;x&lt;m_Entries;x++)           <font class="comment">//??use memcopy for speed</font>
00275         m_Array[x]=l.m_Array[x];
00276     }<font class="keywordflow">else</font>{
00277       m_Array=0;        <font class="comment">// don't allocate until needed</font>
00278       m_ArraySize=0;
00279     }
00280   }
00281   <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00282 }
00283 <font class="comment">// Returns -1 if not found.</font>
00284 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00285"></a><a class="code" href="classskTVAList.html#b0">00285</a> skTVALIST_PRE <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="classskTVAList.html#b0">skTVAList&lt;T&gt;::findElt</a>(<font class="keyword">const</font> T &amp;t) <font class="keyword">const</font>
00286      <font class="comment">//-----------------------------------------------------------------</font>
00287 {
00288   <font class="keywordflow">for</font> (USize index=0;index&lt;m_Entries;index++)<font class="keyword"></font>{
00289     <font class="keywordflow">if</font> (m_Array[index]==t)
00290       <font class="keywordflow">return</font> (int)index;                <font class="comment">// jump out</font>
00291   }
00292   <font class="keywordflow">return</font> -1;
00293 }
00294 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00295"></a><a class="code" href="classskTVAList.html#b1">00295</a> skTVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="classskTVAList.html#b1">skTVAList&lt;T&gt;::grow</a>()
00296      <font class="comment">//-----------------------------------------------------------------</font>
00297 {
00298   <font class="keywordflow">if</font>(m_GrowthIncrement != 0)
00299     m_ArraySize += m_GrowthIncrement;   <font class="comment">// constant increase in size</font>
00300   <font class="keywordflow">else</font>{
00301     <font class="keywordflow">if</font>(m_ArraySize==0)
00302       m_ArraySize = 1;
00303     <font class="keywordflow">else</font>
00304       m_ArraySize *= 2;                 <font class="comment">// double size</font>
00305   }
00306 
00307   T *  new_array=<font class="keyword">new</font> T[m_ArraySize];
00308   <font class="keywordflow">if</font>(m_Array)<font class="keyword"></font>{
00309     <font class="keywordflow">for</font> (USize x=0;x&lt;m_Entries;x++)             <font class="comment">//??use memcopy for speed</font>
00310       new_array[x]=m_Array[x];
00311     <font class="keyword">delete</font> [] m_Array;
00312   }
00313   m_Array=new_array;
00314 }
00315 <font class="comment">//-----------------------------------------------------------------</font>
<a name="l00316"></a><a class="code" href="classskTVAList.html#a15">00316</a> skTVALIST_PRE <font class="keywordtype">void</font> <a class="code" href="classskTVAList.html#a15">skTVAList&lt;T&gt;::growTo</a>(USize new_size)
00317      <font class="comment">//-----------------------------------------------------------------</font>
00318 {
00319   <font class="keywordflow">if</font> (new_size&gt;m_ArraySize)<font class="keyword"></font>{
00320     m_ArraySize=new_size;
00321 
00322     T *  new_array=<font class="keyword">new</font> T[m_ArraySize];
00323     <font class="keywordflow">if</font>(m_Array){
00324       <font class="keywordflow">for</font> (USize x=0;x&lt;m_Entries;x++)           <font class="comment">//??use memcopy for speed</font>
00325         new_array[x]=m_Array[x];
00326       <font class="keyword">delete</font> [] m_Array;
00327     }
00328     m_Array=new_array;
00329   }
00330 }
00331 
00332 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated on Tue Nov 20 17:56:21 2001 for Simkin by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.11.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
