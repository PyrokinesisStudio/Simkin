<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>skString.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>skString.h</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">  Copyright 1996-2003</span>
00003 <span class="comment">  Simon Whiteside</span>
00004 <span class="comment"></span>
00005 <span class="comment">  This library is free software; you can redistribute it and/or</span>
00006 <span class="comment">  modify it under the terms of the GNU Lesser General Public</span>
00007 <span class="comment">  License as published by the Free Software Foundation; either</span>
00008 <span class="comment">  version 2 of the License, or (at your option) any later version.</span>
00009 <span class="comment"></span>
00010 <span class="comment">  This library is distributed in the hope that it will be useful,</span>
00011 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00013 <span class="comment">  Lesser General Public License for more details.</span>
00014 <span class="comment"></span>
00015 <span class="comment">  You should have received a copy of the GNU Lesser General Public</span>
00016 <span class="comment">  License along with this library; if not, write to the Free Software</span>
00017 <span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00018 <span class="comment"></span>
00019 <span class="comment">  * $Id: skString_8h-source.html,v 1.3 2003/04/19 17:56:00 simkin_cvs Exp $</span>
00020 <span class="comment">  */</span>
00021 
00022 
00023 <span class="preprocessor">#ifndef skSTRING_H</span>
00024 <span class="preprocessor"></span><span class="preprocessor">#define skSTRING_H</span>
00025 <span class="preprocessor"></span>
00026 <span class="preprocessor">#include "skGeneral.h"</span>
00027 
00028 <span class="preprocessor">#ifdef STREAMS_ENABLED</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#include &lt;iostream.h&gt;</span>
00030 <span class="preprocessor">#endif</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string.h&gt;</span>
00032 
00033 <span class="preprocessor">#ifdef UNICODE_STRINGS</span>
00034 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">wchar_t</span> Char;
00035 <span class="preprocessor">#define skSTR(x) L ## x</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00037 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">char</span> Char;
00038 <span class="preprocessor">#define skSTR(x) x</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00040 <span class="preprocessor"></span>
00041 <span class="keyword">class </span>P_String;
00042 
<a name="l00047"></a><a class="code" href="classskString.html">00047</a> <span class="keyword">class </span>CLASSEXPORT skString 
00048 #ifdef __SYMBIAN32__
00049 : <span class="keyword">public</span> CBase
00050 #endif
00051 {
00052  <span class="keyword">public</span>:
00056   <span class="keyword">inline</span> skString();
00060   <span class="keyword">inline</span> skString(<span class="keyword">const</span> skString&amp;);
00061 <span class="preprocessor">#ifndef __SYMBIAN32__</span>
00062 <span class="preprocessor"></span>
00066   <span class="keyword">inline</span> skString(<span class="keyword">const</span> Char *);
00073   <span class="keyword">inline</span> skString(<span class="keyword">const</span> Char * buffer, USize len);
00080   skString(<span class="keyword">const</span> Char repeatChar, USize len);
00081 <span class="preprocessor">#endif</span>
00082 <span class="preprocessor"></span>
00085   <span class="keyword">virtual</span> <span class="keyword">inline</span> ~skString();
00089   <span class="keyword">inline</span> skString&amp; operator=(<span class="keyword">const</span> skString&amp;);
00095   IMPORT_C skString&amp; operator=(Char c);
00100   IMPORT_C skString&amp; operator=(<span class="keyword">const</span> Char *);
00105   <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;(<span class="keyword">const</span> skString&amp;) <span class="keyword">const</span>;
00110   <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> skString&amp;) <span class="keyword">const</span>;
00115   <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> Char *) <span class="keyword">const</span>;
00116 <span class="preprocessor">#ifdef __SYMBIAN32__</span>
00117 <span class="preprocessor"></span>
00122   <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> TDesC&amp;) <span class="keyword">const</span>;
00123 <span class="preprocessor">#endif</span>
00124 <span class="preprocessor"></span>
00128   IMPORT_C <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> skString&amp;) <span class="keyword">const</span>;
00133   IMPORT_C <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> Char *) <span class="keyword">const</span>;
00134 <span class="preprocessor">#ifndef __SYMBIAN32__</span>
00135 <span class="preprocessor"></span>
00140   <span class="keyword">inline</span> operator const Char * () <span class="keyword">const</span>;
00141 <span class="preprocessor">#endif</span>
00142 <span class="preprocessor"></span><span class="preprocessor">#ifdef __SYMBIAN32__</span>
00143 <span class="preprocessor"></span>
00148   <span class="keyword">inline</span> skString&amp; operator=(<span class="keyword">const</span> TDesC&amp;);
00154   <span class="keyword">inline</span> TPtrC ptr() <span class="keyword">const</span>;
00155 <span class="preprocessor">#else</span>
00156 <span class="preprocessor"></span>
00161   <span class="keyword">inline</span> <span class="keyword">const</span> Char * ptr() <span class="keyword">const</span>;
00162 <span class="preprocessor">#endif</span>
00163 <span class="preprocessor"></span>
00167   <span class="keyword">inline</span> <span class="keyword">const</span> Char * c_str() <span class="keyword">const</span>;
00173   IMPORT_C <span class="keywordtype">bool</span> equalsIgnoreCase(<span class="keyword">const</span> skString&amp;) <span class="keyword">const</span>;
00177   <span class="keyword">inline</span> USize hash() <span class="keyword">const</span>;
00183   <span class="keyword">inline</span> Char at(USize index) <span class="keyword">const</span>;
00191   IMPORT_C skString substr(USize start,USize length) <span class="keyword">const</span>;
00198   IMPORT_C skString substr(USize start) <span class="keyword">const</span>;
00204   IMPORT_C skString operator+(<span class="keyword">const</span> skString&amp;) <span class="keyword">const</span> ;
00210   IMPORT_C skString&amp; operator+=(<span class="keyword">const</span> skString&amp;);
00215   <span class="keyword">inline</span> USize length() <span class="keyword">const</span>;
00220   IMPORT_C <span class="keywordtype">int</span> indexOf(<span class="keyword">const</span> skString&amp; s) <span class="keyword">const</span>;
00225   IMPORT_C <span class="keywordtype">int</span> indexOf(Char c) <span class="keyword">const</span>;
00230   IMPORT_C <span class="keywordtype">int</span> indexOfLast(Char c) <span class="keyword">const</span>;
00234   IMPORT_C <span class="keywordtype">int</span> to() <span class="keyword">const</span>;
00235 <span class="preprocessor">#ifdef USE_FLOATING_POINT</span>
00236 <span class="preprocessor"></span>
00239   IMPORT_C <span class="keywordtype">float</span> toFloat() <span class="keyword">const</span>;
00240 <span class="preprocessor">#endif</span>
00241 <span class="preprocessor"></span>
00245   <span class="keyword">static</span> IMPORT_C skString literal(<span class="keyword">const</span> Char *);
00250   <span class="keyword">static</span> IMPORT_C skString from(<span class="keywordtype">int</span>);
00255   <span class="keyword">static</span> IMPORT_C skString from(USize);
00256 <span class="preprocessor">#ifdef USE_FLOATING_POINT</span>
00257 <span class="preprocessor"></span>
00261   <span class="keyword">static</span> IMPORT_C skString from(<span class="keywordtype">float</span>);
00262 <span class="preprocessor">#endif</span>
00263 <span class="preprocessor"></span>
00267   <span class="keyword">static</span> IMPORT_C skString from(Char ch);
00272   <span class="keyword">static</span> IMPORT_C skString fromBuffer(Char * buffer);
00277   <span class="keyword">static</span> IMPORT_C skString copyFromBuffer(<span class="keyword">const</span> Char * buffer,USize length);
00282   skString IMPORT_C ltrim() <span class="keyword">const</span>;
00289   skString IMPORT_C removeInitialBlankLines() <span class="keyword">const</span>;
00290 <span class="preprocessor">#ifndef __SYMBIAN32__</span>
00291 <span class="preprocessor"></span>
00296   <span class="keyword">static</span> skString IMPORT_C readFromFile(<span class="keyword">const</span> skString&amp; filename);
00302   <span class="keywordtype">void</span> IMPORT_C writeToFile(<span class="keyword">const</span> skString&amp; filename);
00303 <span class="preprocessor">#endif</span>
00304 <span class="preprocessor"></span>
00310   IMPORT_C skString replace(<span class="keyword">const</span> skString&amp; old_substr,<span class="keyword">const</span> skString&amp; new_substr) <span class="keyword">const</span>;
00317   IMPORT_C skString replace(<span class="keyword">const</span> Char * old_substr,<span class="keyword">const</span> Char * new_substr) <span class="keyword">const</span>;
00322   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> skString&amp; s1,<span class="keyword">const</span> skString &amp; s2);
00327   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> skString &amp; s1,<span class="keyword">const</span> skString &amp; s2,<span class="keyword">const</span> skString &amp; s3);
00332   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> skString &amp; s1,<span class="keyword">const</span> skString &amp; s2,<span class="keyword">const</span> skString &amp; s3,<span class="keyword">const</span> skString &amp; s4);
00337   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> skString &amp; s1,<span class="keyword">const</span> skString &amp; s2,<span class="keyword">const</span> skString &amp; s3,<span class="keyword">const</span> skString &amp; s4,<span class="keyword">const</span> skString &amp; s5);
00342   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> skString &amp; s1,<span class="keyword">const</span> skString &amp; s2,<span class="keyword">const</span> skString &amp; s3,<span class="keyword">const</span> skString &amp; s4,<span class="keyword">const</span> skString &amp; s5,<span class="keyword">const</span> skString &amp; s6);
00347   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> skString &amp; s1,<span class="keyword">const</span> skString &amp; s2,<span class="keyword">const</span> skString &amp; s3,<span class="keyword">const</span> skString &amp; s4,<span class="keyword">const</span> skString &amp; s5,<span class="keyword">const</span> skString &amp; s6,<span class="keyword">const</span> skString &amp; s7);
00352   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> skString &amp; s1,<span class="keyword">const</span> skString &amp; s2,<span class="keyword">const</span> skString &amp; s3,<span class="keyword">const</span> skString &amp; s4,<span class="keyword">const</span> skString &amp; s5,<span class="keyword">const</span> skString &amp; s6,<span class="keyword">const</span> skString &amp; s7,<span class="keyword">const</span> skString &amp; s8);
00353 <span class="preprocessor">#ifdef __SYMBIAN32__</span>
00354 <span class="preprocessor"></span>
00361   IMPORT_C skString replace(<span class="keyword">const</span> TDesC&amp; old_substr,<span class="keyword">const</span> TDesC&amp; new_substr) <span class="keyword">const</span>;
00367   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> TDesC&amp; s2);
00373   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> TDesC&amp; s2,<span class="keyword">const</span> TDesC&amp; s3);
00378   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> TDesC&amp; s2,<span class="keyword">const</span> TDesC&amp; s3,<span class="keyword">const</span> TDesC&amp; s4);
00384   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> TDesC&amp; s2,<span class="keyword">const</span> TDesC&amp; s3,<span class="keyword">const</span> TDesC&amp; s4,<span class="keyword">const</span> TDesC&amp; s5);
00390   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> TDesC&amp; s2,<span class="keyword">const</span> TDesC&amp; s3,<span class="keyword">const</span> TDesC&amp; s4,<span class="keyword">const</span> TDesC&amp; s5,<span class="keyword">const</span> TDesC&amp; s6);
00396   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> TDesC&amp; s2,<span class="keyword">const</span> TDesC&amp; s3,<span class="keyword">const</span> TDesC&amp; s4,<span class="keyword">const</span> TDesC&amp; s5,<span class="keyword">const</span> TDesC&amp; s6,<span class="keyword">const</span> TDesC&amp; s7);
00402   IMPORT_C <span class="keyword">static</span> skString addStrings(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> TDesC&amp; s2,<span class="keyword">const</span> TDesC&amp; s3,<span class="keyword">const</span> TDesC&amp; s4,<span class="keyword">const</span> TDesC&amp; s5,<span class="keyword">const</span> TDesC&amp; s6,<span class="keyword">const</span> TDesC&amp; s7,<span class="keyword">const</span> TDesC&amp; s8);
00403 <span class="preprocessor">#endif</span>
00404 <span class="preprocessor"></span>
00407   IMPORT_C <span class="keywordtype">void</span> replaceInPlace(Char old_char,Char new_char);
00408 <span class="preprocessor">#ifdef __SYMBIAN32__</span>
00409 <span class="preprocessor"></span>
00414   <span class="keyword">inline</span> operator TCleanupItem();
00419   <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> Cleanup(TAny * s);
00420 <span class="preprocessor">#endif</span>
00421 <span class="preprocessor"></span> <span class="keyword">protected</span>:
00425   skString(P_String *);
00430   IMPORT_C <span class="keywordtype">void</span> assign(<span class="keyword">const</span> Char *,<span class="keywordtype">int</span> len=0);                         
00434   <span class="keywordtype">void</span> deRef();
<a name="l00438"></a><a class="code" href="classskString.html#n0">00438</a>   P_String * pimp;
00439 <span class="preprocessor">#ifdef __SYMBIAN32__</span>
00440 <span class="preprocessor"></span>  <span class="keyword">friend</span> CLASSEXPORT skString operator+(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> skString&amp; s2);
00441 <span class="preprocessor">#endif</span>
00442 <span class="preprocessor"></span>  <span class="keyword">friend</span> CLASSEXPORT skString operator+(<span class="keyword">const</span> Char * s1,<span class="keyword">const</span> skString&amp; s2);
00443 
00444 };
00445 <span class="comment">/*</span>
00446 <span class="comment"> * A hashKey function for HashTables</span>
00447 <span class="comment"> */</span>
00448 <span class="comment">//---------------------------------------------------</span>
00449 <span class="keyword">inline</span> USize hashKey(<span class="keyword">const</span> skString * s)
00450 <span class="comment">//---------------------------------------------------</span>
00451 {
00452   <span class="keywordflow">return</span> s-&gt;<a class="code" href="classskString.html#a18">hash</a>();
00453 }
00454 <span class="comment">/*</span>
00455 <span class="comment"> * An operator to add strings</span>
00456 <span class="comment"> */</span>
00457 <span class="preprocessor">#ifdef __SYMBIAN32__</span>
00458 <span class="preprocessor"></span>CLASSEXPORT skString operator+(<span class="keyword">const</span> TDesC&amp; s1,<span class="keyword">const</span> skString&amp; s2);
00459 <span class="preprocessor">#endif</span>
00460 <span class="preprocessor"></span>CLASSEXPORT skString operator+(<span class="keyword">const</span> Char *&amp; s1,<span class="keyword">const</span> skString&amp; s2);
00461 
00462 <span class="preprocessor">#ifdef STREAMS_ENABLED</span>
00463 <span class="preprocessor"></span><span class="comment">/*</span>
00464 <span class="comment"> * A streaming operator to write a string to an output stream</span>
00465 <span class="comment"> */</span>
00466 CLASSEXPORT ostream&amp; operator&lt;&lt;(ostream&amp;,<span class="keyword">const</span> skString&amp;s);
00467 <span class="preprocessor">#endif</span>
00468 <span class="preprocessor"></span><span class="comment">/*</span>
00469 <span class="comment"> * Some helper macros for declaring literal strings, and references to literal strings</span>
00470 <span class="comment"> */</span>
00471 <span class="preprocessor">#ifdef __SYMBIAN32__</span>
00472 <span class="preprocessor"></span><span class="comment">//#define skLITERAL(name) _LIT(s_##name,#name)</span>
00473 <span class="preprocessor">#define skLITERAL(name) const TLitC16&lt;sizeof(L## #name )/2&gt; s_##name={sizeof(L## #name)/2-1,L## #name}</span>
00474 <span class="preprocessor"></span><span class="comment">//#define xskLITERAL(name) _LIT(s_##name,#name)</span>
00475 <span class="preprocessor">#define xskLITERAL(name) extern const TLitC16&lt;sizeof(L## #name )/2&gt; s_##name</span>
00476 <span class="preprocessor"></span><span class="comment">//#define skNAMED_LITERAL(name,value) _LIT(s_##name,#value)</span>
00477 <span class="preprocessor">#define skNAMED_LITERAL(name,value) const TLitC16&lt;sizeof(value )/2&gt; s_##name={sizeof(value)/2-1,value}</span>
00478 <span class="preprocessor"></span><span class="comment">//#define xskNAMED_LITERAL(name,value) _LIT(s_##name,#value)</span>
00479 <span class="preprocessor">#define xskNAMED_LITERAL(name,value) extern const TLitC16&lt;sizeof(value)/2&gt; s_##name</span>
00480 <span class="preprocessor"></span><span class="comment">//#define skLITERAL_STRING(name,value) _LIT(s_##name,value)</span>
00481 <span class="preprocessor">#define skLITERAL_STRING(name,value) const TLitC16&lt;sizeof(L## #value )/2&gt; s_##name={sizeof(L## #value)/2-1,L## #value}</span>
00482 <span class="preprocessor"></span><span class="comment">//#define xskLITERAL_STRING(name,value) _LIT(s_##name,value)</span>
00483 <span class="preprocessor">#define xskLITERAL_STRING(name,value) extern const TLitC16&lt;sizeof(L##value)/2&gt; s_##name</span>
00484 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00485 <span class="preprocessor"></span><span class="preprocessor">#define skLITERAL(name) const Char * s_##name=skSTR(#name)</span>
00486 <span class="preprocessor"></span><span class="preprocessor">#define xskLITERAL(name) extern const Char * s_##name</span>
00487 <span class="preprocessor"></span><span class="preprocessor">#define skNAMED_LITERAL(name,value) const Char * s_##name=value</span>
00488 <span class="preprocessor"></span><span class="preprocessor">#define xskNAMED_LITERAL(name,value) extern const Char * s_##name</span>
00489 <span class="preprocessor"></span><span class="preprocessor">#define skLITERAL_STRING(name,value) const Char * s_##name=skSTR(value)</span>
00490 <span class="preprocessor"></span><span class="preprocessor">#define xskLITERAL_STRING(name,value) extern const Char * s_##name;</span>
00491 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00492 <span class="preprocessor"></span>
00493 
00494 <span class="preprocessor">#include "skString.inl"</span>
00495 
00496 <span class="preprocessor">#endif</span>
00497 <span class="preprocessor"></span>
00498 
00499 
</pre></div><hr><address style="align: right;"><small>Generated on Sat Apr 19 18:54:43 2003 for Simkin C++ for Windows CE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3 </small></address>
</body>
</html>
